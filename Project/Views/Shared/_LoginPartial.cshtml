@model WebUI.ViewModels.UserAccountViewModel
@using Microsoft.AspNetCore.Identity
@inject SignInManager<IdentityUser> SignInManager
@inject UserManager<IdentityUser> UserManager

<div class="rightIcons">
    @if (SignInManager.IsSignedIn(User))
    {
        <a asp-area="" asp-controller="Home" asp-action="Upload">
            <img src="~/images/icons/upload.png" />
        </a>
        <a asp-area="Identity" asp-page="/Account/Logout" asp-route-returnUrl="@Url.Action("Index", "Home", new { area = "" })">
            <img src="~/images/profilePictures/default-male.png" />
        </a>
    }
    else
    {
        <a asp-area="" asp-controller="Home" asp-action="Upload">
            <img src="~/images/icons/upload.png" />
        </a>

        <!-- Button to open signInModal -->
        <button type="button" class="rightIcons" data-toggle="modal" data-target="#signInModal" aria-hidden="true">
            <img src="~/images/profilePictures/default.png" />
        </button>
    }
</div>

<div class="modal fade" id="signInModal" data-backdrop="false" style="background-color: rgba(0, 0, 0, 0.5)">
    <div class="modal-dialog">
        <div class="modal-content">

            <div class="header">
                <img src="~/images/icons/TheAzureTubeLogo.png" title="logo" alt="Site Logo">
                <button type="button" class="close" data-dismiss="modal">x</button>
                <h3>Sign In</h3>
                <span>to continue to TheAzureTube</span>
            </div>

            <div class="modal-body">
                <partial name="_LoginForm" />
            </div>

            <!-- Link to open signUpModal -->
            <a data-toggle="modal" href="#signUpModal" data-dismiss="modal" aria-hidden="true">
                Need an account? Sign up here!
            </a>

        </div>
    </div>
</div>


<div class="modal fade" id="signUpModal" data-backdrop="false" style="background-color: rgba(0, 0, 0, 0.5)">
    <div class="modal-dialog">
        <div class="modal-content">

            <div class="header">
                <img src="~/images/icons/TheAzureTubeLogo.png" title="logo" alt="Site Logo">
                <button type="button" class="close" data-dismiss="modal">x</button>
                <h3>Sign up</h3>
                <span>to continue to TheAzureTube</span>
            </div>

            <div class="modal-body">
                <partial name="_RegisterForm" />
            </div>

            <!-- Link to open signInModal 
            <a data-toggle="#modal" href="#signInModal" data-dismiss="modal" aria-hidden="true">
                Already have an account? Sign in here!
            </a>
                -->
            
        </div>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
